<?xml version="1.0"?>

<!--

	ADOBE SYSTEMS INCORPORATED
	Copyright 2007 Adobe Systems Incorporated
	All Rights Reserved.

	NOTICE: Adobe permits you to use, modify, and distribute this file
	in accordance with the terms of the license agreement accompanying it.

-->

<project name="graphics" default="main" basedir=".">

	<property name="FLEX_HOME" location="${basedir}/../../.."/>

	<property file="${FLEX_HOME}/build.properties"/>

	<target name="main" depends="clean,compile" description="Clean build of FlexComponentBase.swc"/>

	<target name="clean">
		<delete failonerror="false">
			<fileset file="${basedir}/bundles.properties"/>
			<fileset dir="${basedir}/libs">
				<include name="FlexComponentBase.swc"/>
				<include name="FlexComponentBase.swc.incr"/>
			</fileset>
		</delete>
	</target>

	<target name="compile" description="Compiles FlexComponentBase.swc">
		<echo message="Compiling frameworks/projects/flash-integration/libs/FlexComponentBase.swc"/>
		<taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/lib/flexTasks.jar"/>
		<!--
			Link in the classes (and their dependencies) for the MXML tags
			listed in manifest.xml.
			Compile against framework source, and link it into FlexComponentBase.swc
			(only a few interfaces will be linked in).
			Don't put any resources into the SWC.
			Write a bundle list of referenced resource bundles
			into the file bundles.properties in this directory.
			(This should be an empty list.)
		-->
		<compc fork="true"
			   output="${basedir}/libs/FlexComponentBase.swc"
			   resource-bundle-list="${basedir}/bundles.properties">
			<jvmarg line="${compc.jvm.args}"/>
			<namespace uri="http://www.adobe.com/2006/mxml" manifest="${basedir}/manifest.xml"/>
			<include-namespaces uri="http://www.adobe.com/2006/mxml"/>
			<source-path path-element="${basedir}/src"/>
			<source-path path-element="${FLEX_HOME}/frameworks/projects/framework/src"/>
			<library-path/>
			<external-library-path dir="${FLEX_HOME}/frameworks/libs">
				<include name="player/playerglobal.swc"/>
			</external-library-path>
			<locale/>
			<accessible>true</accessible>
			<compute-digest>false</compute-digest>
		</compc>
	</target>

</project>
